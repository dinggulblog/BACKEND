"use strict";(self["webpackChunkDINGGUL"]=self["webpackChunkDINGGUL"]||[]).push([[845],{5170:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(6252),i=n(2262),r=n(3577),o=n(4254);const l=["😀","😃","😄","😁","😆","😅","😂","🤣","😈","🤔","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","👿","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","👻","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳"],s={class:"emoji-container"},c={class:"emojis"},u=["onClick"],d=(0,a._)("button",{class:"md-editor-icon"}," 🙂 ",-1);var m={__name:"EmojiExtension",props:{onInsert:{type:Function,default:()=>()=>null}},setup(e){const t=e,{DropdownToolbar:n}=o.Z,m=(0,i.qj)({visible:!1}),p=e=>{const n=()=>({targetValue:e,select:!1,deviationStart:0,deviationEnd:0});t.onInsert(n)},g=e=>{m.visible=e};return(e,t)=>((0,a.wg)(),(0,a.j4)((0,i.SU)(n),{title:"emoji",visible:m.visible,onOnChange:g},{overlay:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("ol",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(l),((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:`emoji-${t}`,onClick:t=>p(e)},(0,r.zw)(e),9,u)))),128))])])])),trigger:(0,a.w5)((()=>[d])),_:1},8,["visible"]))}};const p=m;var g=p},1328:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(6252),i=n(9963),r=n(2262),o=n(3577),l=n(2201),s=n(3907),c=n(7407),u=n(2608),d=n(8032),m=n(4254),p=n(5170),g=n(6351),k=n(4835);const v={class:"profile"},f={class:"wrap_author"},w={key:0,class:"wrap_btn-edit"},b={class:"wrap_tab"},_={class:"tab"},h=["onClick"],y={key:0,class:"introduce"},U={id:"recent"};var j={__name:"Profile",setup(e){const{go:t,currentRoute:n}=(0,l.tv)(),{state:j,dispatch:H}=(0,s.oR)(),L=(0,a.f3)("isMobile"),T=(0,a.f3)("TOAST_EL"),D=(0,r.iH)(null);m.Z.config({editorConfig:{languageUserDefined:{"ko-KR":k.s}}});const C=(0,r.iH)([{name:"intro",content:"소개글"},{name:"like",content:"좋아요 한 게시물"},{name:"comment",content:"댓글 단 게시물"}]),P=(0,r.qj)({nickname:"",_id:"",avatar:"",greetings:"",introduce:""}),Z=(0,r.qj)({tab:"intro",state:"view"}),I=(0,a.Fl)((()=>j.auth.user)),S=e=>{Z.state=e},E=e=>{Z.tab=e},q=async e=>{if(I.value.nickname!==P.nickname)return T.value.open("error","본인 프로필만 수정 가능합니다.");const t=new FormData;t.append("avatar",e.target.files[0]);const{success:n,profile:a}=await H("auth/updateProfileAvatar",{nickname:P.nickname,payload:t});if(!n)return T.value.open("error","아바타 업데이트 도중 에러가 발생하였습니다.");P.avatar=a.avatar},F=async()=>{if(I.value.nickname!==P.nickname)return T.value.open("error","본인 프로필만 수정 가능합니다.");const{success:e}=await H("auth/deleteProfileAvatar",{nickname:P.nickname});if(!e)return T.value.open("error","아바타 업데이트 도중 에러가 발생하였습니다.");P.avatar=null},R=e=>{P.greetings=e.target.value},x=async()=>{if(P.greetings.length>150)return T.value.open("error","글자 수 제한을 초과하였습니다. (최대 150자까지 허용)");const{success:e,profile:t}=await H("auth/updateProfile",{nickname:P.nickname,payload:{greetings:P.greetings}});e&&(P.greetings=t.greetings,S("view"))},A=async()=>{const{success:e,profile:t}=await H("auth/updateProfile",{nickname:P.nickname,payload:{introduce:P.introduce}});e&&(P.introduce=t.introduce,S("view"))},V=e=>{D.value?.insert(e)};return(0,a.YP)(n,(async()=>{const{profile:e,error:a}=await H("auth/getProfile",{nickname:n.value.params.nickname});if(a)return alert(a),t(-1);P._id=e._id,P.nickname=e.nickname,P.avatar=e.avatar,P.greetings=e.greetings,P.introduce=e.introduce}),{immediate:!0}),(e,t)=>{const n=(0,a.up)("Button");return(0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"]))},[(0,a._)("div",f,[(0,a.Wm)(c.Z,{profile:P,state:Z.state,onUpdateAvatar:q,onResetAvatar:F,onUpdateGreetings:R},null,8,["profile","state"]),P.nickname===(0,r.SU)(I)?.nickname?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("button",{class:"btn_edit",onClick:t[0]||(t[0]=e=>"edit"===Z.state?x():S("edit"))},(0,o.zw)("edit"===Z.state?"편집 완료":"기본 정보 편집"),1)])):(0,a.kq)("",!0)])],32),(0,a._)("div",b,[(0,a._)("ul",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.value,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.name,class:(0,o.C_)(e.name===Z.tab?"isActive":""),onClick:t=>E(e.name)},(0,o.zw)(e.content),11,h)))),128))])]),"intro"===Z.tab?((0,a.wg)(),(0,a.iD)("div",y,["introEdit"===Z.state?((0,a.wg)(),(0,a.j4)((0,r.SU)(m.Z),{key:0,ref_key:"PROFILE_EL",ref:D,modelValue:P.introduce,"onUpdate:modelValue":t[2]||(t[2]=e=>P.introduce=e),language:"ko-KR",toolbars:(0,r.SU)(g.Z),preview:!(0,r.SU)(L)},{defToolbars:(0,a.w5)((()=>[(0,a.Wm)(p.Z,{onInsert:V})])),_:1},8,["modelValue","toolbars","preview"])):((0,a.wg)(),(0,a.j4)((0,r.SU)(m.Z),{key:1,modelValue:P.introduce,"onUpdate:modelValue":t[3]||(t[3]=e=>P.introduce=e),previewOnly:""},null,8,["modelValue"])),P.nickname===(0,r.SU)(I)?.nickname?((0,a.wg)(),(0,a.j4)(n,{key:2,class:"btn_edit_introduce",size:"sm",shape:"fill-round",theme:"primary",onClick:t[4]||(t[4]=e=>"introEdit"===Z.state?A():S("introEdit"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)("introEdit"===Z.state?"편집 완료":"소개글 편집"),1)])),_:1})):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.j4)(a.n4,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(u.Z,{filter:Z.tab,userId:P._id,type:"recent"},null,8,["filter","userId"])])),fallback:(0,a.w5)((()=>[(0,a._)("ul",U,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(6,(e=>(0,a.Wm)(d.Z,{key:e}))),64))])])),_:1}))])}}},H=n(3744);const L=(0,H.Z)(j,[["__scopeId","data-v-6b76753b"]]);var T=L},4835:function(e,t,n){n.d(t,{s:function(){return a}});const a={toolbarTips:{bold:"진하게",underline:"밑줄",italic:"기울임꼴",strikeThrough:"취소선",title:"표제",sub:"아래 첨자",sup:"위 첨자",quote:"인용문",unorderedList:"글머리 기호",orderedList:"번호 매기기",task:"할 일 목록",codeRow:"인라인 코드",code:"코드 블록",link:"링크",image:"이미지",table:"테이블",mermaid:"Mermaid",katex:"Formula",revoke:"되돌리기",next:"다시 실행",save:"임시 저장",prettier:"자동 정렬",pageFullscreen:"페이지 전체화면",fullscreen:"전체화면",preview:"미리보기",htmlPreview:"HTML 미리보기",catalog:"카탈로그",github:" Github 소스 코드"},titleItem:{h1:"1 Heading",h2:"2 Heading",h3:"3 Heading",h4:"4 Heading",h5:"5 Heading",h6:"6 Heading"},imgTitleItem:{link:"링크 추가",upload:"이미지 업로드",clip2upload:"클립 업로드"},linkModalTips:{title:"링크 추가",descLabel:"설명:",descLabelPlaceHolder:"(선택사항) 설명을 입력해 주세요...",urlLabel:"링크:",urlLabelPlaceHolder:"링크를 입력해 주세요...",buttonOK:"완료"},clipModalTips:{title:"클립 이미지 업로드",buttonUpload:"업로드"},copyCode:{text:"복사하기",successTips:"복사 완료!",failTips:"복사 실패..."},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"글자 수",scrollAuto:"자동 스크롤"}}},6351:function(e,t,n){n.d(t,{Z:function(){return a}});const a=["bold","underline","italic","-","title","strikeThrough","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","0","=","revoke","next","save","pageFullscreen","preview","htmlPreview","catalog"]}}]);
//# sourceMappingURL=profile.0868f646.js.map