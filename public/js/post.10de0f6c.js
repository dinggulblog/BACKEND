(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["post"],{"0351":function(e,t,o){"use strict";o("c193")},"03cc":function(e,t,o){},"06f1":function(e,t,o){},"0c94":function(e,t,o){"use strict";o("504a")},"115a":function(e,t,o){"use strict";o("9a0d")},"504a":function(e,t,o){},"5a0c":function(e,t,o){!function(t,o){e.exports=o()}(0,(function(){"use strict";var e=1e3,t=6e4,o=36e5,n="millisecond",c="second",r="minute",s="hour",l="day",i="week",a="month",d="quarter",m="year",u="date",p="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,o){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(o)+e},v={s:h,z:function(e){var t=-e.utcOffset(),o=Math.abs(t),n=Math.floor(o/60),c=o%60;return(t<=0?"+":"-")+h(n,2,"0")+":"+h(c,2,"0")},m:function e(t,o){if(t.date()<o.date())return-e(o,t);var n=12*(o.year()-t.year())+(o.month()-t.month()),c=t.clone().add(n,a),r=o-c<0,s=t.clone().add(n+(r?-1:1),a);return+(-(n+(o-c)/(r?c-s:s-c))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:a,y:m,w:i,d:l,D:u,h:s,m:r,s:c,ms:n,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},f="en",C={};C[f]=j;var k=function(e){return e instanceof E},y=function e(t,o,n){var c;if(!t)return f;if("string"==typeof t){var r=t.toLowerCase();C[r]&&(c=r),o&&(C[r]=o,c=r);var s=t.split("-");if(!c&&s.length>1)return e(s[0])}else{var l=t.name;C[l]=t,c=l}return!n&&c&&(f=c),c||!n&&f},g=function(e,t){if(k(e))return e.clone();var o="object"==typeof t?t:{};return o.date=e,o.args=arguments,new E(o)},_=v;_.l=y,_.i=k,_.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function j(e){this.$L=y(e.locale,null,!0),this.parse(e)}var h=j.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,o=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(b);if(n){var c=n[2]-1||0,r=(n[7]||"0").substring(0,3);return o?new Date(Date.UTC(n[1],c,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],c,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return _},h.isValid=function(){return!(this.$d.toString()===p)},h.isSame=function(e,t){var o=g(e);return this.startOf(t)<=o&&o<=this.endOf(t)},h.isAfter=function(e,t){return g(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<g(e)},h.$g=function(e,t,o){return _.u(e)?this[t]:this.set(o,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,t){var o=this,n=!!_.u(t)||t,d=_.p(e),p=function(e,t){var c=_.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o);return n?c:c.endOf(l)},b=function(e,t){return _.w(o.toDate()[e].apply(o.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),o)},O=this.$W,j=this.$M,h=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case m:return n?p(1,0):p(31,11);case a:return n?p(1,j):p(0,j+1);case i:var f=this.$locale().weekStart||0,C=(O<f?O+7:O)-f;return p(n?h-C:h+(6-C),j);case l:case u:return b(v+"Hours",0);case s:return b(v+"Minutes",1);case r:return b(v+"Seconds",2);case c:return b(v+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(e,t){var o,i=_.p(e),d="set"+(this.$u?"UTC":""),p=(o={},o[l]=d+"Date",o[u]=d+"Date",o[a]=d+"Month",o[m]=d+"FullYear",o[s]=d+"Hours",o[r]=d+"Minutes",o[c]=d+"Seconds",o[n]=d+"Milliseconds",o)[i],b=i===l?this.$D+(t-this.$W):t;if(i===a||i===m){var O=this.clone().set(u,1);O.$d[p](b),O.init(),this.$d=O.set(u,Math.min(this.$D,O.daysInMonth())).$d}else p&&this.$d[p](b);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[_.p(e)]()},h.add=function(n,d){var u,p=this;n=Number(n);var b=_.p(d),O=function(e){var t=g(p);return _.w(t.date(t.date()+Math.round(e*n)),p)};if(b===a)return this.set(a,this.$M+n);if(b===m)return this.set(m,this.$y+n);if(b===l)return O(1);if(b===i)return O(7);var j=(u={},u[r]=t,u[s]=o,u[c]=e,u)[b]||1,h=this.$d.getTime()+n*j;return _.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,o=this.$locale();if(!this.isValid())return o.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",c=_.z(this),r=this.$H,s=this.$m,l=this.$M,i=o.weekdays,a=o.months,d=function(e,o,c,r){return e&&(e[o]||e(t,n))||c[o].slice(0,r)},m=function(e){return _.s(r%12||12,e,"0")},u=o.meridiem||function(e,t,o){var n=e<12?"AM":"PM";return o?n.toLowerCase():n},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:_.s(l+1,2,"0"),MMM:d(o.monthsShort,l,a,3),MMMM:d(a,l),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:d(o.weekdaysMin,this.$W,i,2),ddd:d(o.weekdaysShort,this.$W,i,3),dddd:i[this.$W],H:String(r),HH:_.s(r,2,"0"),h:m(1),hh:m(2),a:u(r,s,!0),A:u(r,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:c};return n.replace(O,(function(e,t){return t||b[e]||c.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(n,u,p){var b,O=_.p(u),j=g(n),h=(j.utcOffset()-this.utcOffset())*t,v=this-j,f=_.m(this,j);return f=(b={},b[m]=f/12,b[a]=f,b[d]=f/3,b[i]=(v-h)/6048e5,b[l]=(v-h)/864e5,b[s]=v/o,b[r]=v/t,b[c]=v/e,b)[O]||v,p?f:_.a(f)},h.daysInMonth=function(){return this.endOf(a).$D},h.$locale=function(){return C[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var o=this.clone(),n=y(e,t,!0);return n&&(o.$L=n),o},h.clone=function(){return _.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},j}(),w=E.prototype;return g.prototype=w,[["$ms",n],["$s",c],["$m",r],["$H",s],["$W",l],["$M",a],["$y",m],["$D",u]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),g.extend=function(e,t){return e.$i||(e(t,E,g),e.$i=!0),g},g.locale=y,g.isDayjs=k,g.unix=function(e){return g(1e3*e)},g.en=C[f],g.Ls=C,g.p={},g}))},"6c2c":function(e,t,o){"use strict";o("84c6")},7134:function(e,t,o){},7611:function(e,t,o){"use strict";o("03cc")},"7c2b":function(e,t,o){"use strict";o.r(t);var n=o("7a23");function c(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Post",!0),i=Object(n["resolveComponent"])("Comments");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[e.post?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,post:e.post,onDeletePost:e.onDeletePost,onUpdateLike:e.onUpdateLike},null,8,["post","onDeletePost","onUpdateLike"])):Object(n["createCommentVNode"])("",!0),e.post?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:1,post:e.post,userId:e.userId,comments:e.comments,commentCount:e.commentCount,onDeleteComment:e.onDeleteComment},null,8,["post","userId","comments","commentCount","onDeleteComment"])):Object(n["createCommentVNode"])("",!0)],64)}var r=o("6605"),s=o("5502"),l=o("325c"),i=o("f03e"),a=o.n(i),d=o("362d"),m=o.n(d);const u=["onClick"];function p(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(c.isMobile?"BottomSheet":"Dropbox"),{ref:"DROPBOX_EL"},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.dropboxItems,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t},[Object(n["createElementVNode"])("span",{onClick:e},Object(n["toDisplayString"])(t),9,u)]))),128))]),_:1},512)}var b=o("7702");const O={class:"dropbox"},j={class:"wrap_dropbox_items",ref:"DROPBOX_ITEMS_EL"};function h(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"default")])],512)])}var v={name:"Dropbox",setup(){const e=Object(n["ref"])(null),t=()=>{r(),e.value.classList.add("show")},o=()=>{e.value.classList.remove("show")},c=()=>{e.value.classList.contains("show")?o():t()},r=()=>{const e=document.body.getElementsByClassName("wrap_dropbox_items");for(let t=0;t<e.length;t++)e[t].classList.contains("show")&&e[t].classList.remove("show")};return window.onclick=e=>{e.target.matches(".btn_dropbox > svg")||e.target.matches(".btn_dropbox > svg > path")||r()},Object(n["onMounted"])(()=>{e.value.addEventListener("click",e=>{e.stopPropagation()})}),{DROPBOX_ITEMS_EL:e,open:t,close:o,toggle:c}}},f=o("6b0d"),C=o.n(f);const k=C()(v,[["render",h]]);var y=k;const g={key:0,class:"bottom-sheet"},_={class:"window"};function E(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Transition"],{name:"fade"},{default:Object(n["withCtx"])(()=>[c.isVisible?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,[Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)])])])):Object(n["createCommentVNode"])("",!0)]),_:3})}var w={setup(){const e=Object(n["ref"])(!1),t=()=>{e.value=!0},o=()=>{e.value=!1},c=()=>{e.value?o():t()};return{isVisible:e,open:t,close:o,toggle:c}}};o("115a");const B=C()(w,[["render",E],["__scopeId","data-v-921ada28"]]);var V=B,N={name:"DropboxSlot",components:{Dropbox:y,BottomSheet:V},props:{dropboxItems:{type:Object,required:!0}},setup(){const e=Object(b["a"])("only screen and (max-width: 1023px)"),t=Object(n["ref"])(null),o=()=>{t.value.toggle()},c=o=>{!e||!t.value.isVisible||o.target.matches(".btn_dropbox > svg")||o.target.matches(".btn_dropbox > svg > path")||o.target.matches(".window")||o.target.matches(".window > ul")||o.target.matches(".window > ul > li")||t.value.close()};return Object(n["onMounted"])(()=>{document.body.addEventListener("click",c)}),Object(n["onUnmounted"])(()=>{document.body.removeEventListener("click",c)}),{isMobile:e,DROPBOX_EL:t,onToggle:o}}};o("6c2c");const I=C()(N,[["render",p]]);var S=I,$=o("fde8");const D={class:"createdAt"},M={class:"category"};function x(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Info");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{createdAt:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",D,Object(n["toDisplayString"])(c.dayjs(o.post.createdAt).format("YYYY. M. D")),1)])]),category:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",M,Object(n["toDisplayString"])(o.post.category),1)])]),_:1})}const L={class:"info"};function T(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"author"),Object(n["renderSlot"])(e.$slots,"createdAt"),Object(n["renderSlot"])(e.$slots,"category"),Object(n["renderSlot"])(e.$slots,"reply_count"),Object(n["renderSlot"])(e.$slots,"is-public")])])}o("a6db");const P={},A=C()(P,[["render",T]]);var U=A,Y=o("5a0c"),q=o.n(Y),z={name:"InfoSlot",components:{Info:U},props:{post:{type:Object,required:!0}},setup(){return{dayjs:q.a}}};const F=C()(z,[["render",x]]);var H=F;const W={key:0,class:"post"},J={class:"wrap_header"},R={class:"wrap_left"},X={class:"wrap_title"},Z={class:"title"},G={key:0,class:"lock_ico"},Q={class:"wrap_info"},K={class:"wrap_right"},ee={class:"content"},te={class:"wrap_like"},oe={class:"liked_count"},ne={class:"wrap_author"},ce=Object(n["createTextVNode"])(" 프로필 보러가기 "),re={class:"wrap_link"},se={key:0},le={key:1};var ie={__name:"Post",props:{post:{type:Object,required:!0,default:()=>({})}},emits:["updateLike","deletePost"],setup(e,{emit:t}){const o=e,{push:c}=Object(r["e"])(),s=Object(n["ref"])([{plugin:m.a}]),i=Object(n["ref"])(null),d=()=>{i.value&&i.value.onToggle()},u=Object(l["b"])(()=>{t("updateLike")},500),p=()=>{o.post._id&&c({name:"editor",query:{id:o.post._id}})},b=()=>{t("deletePost")},O=e=>{e&&c({name:"post",query:{id:e}})},j=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("클립보드에 복사되었습니다")}catch{alert("링크 복사에 실패하였습니다.")}};return(t,o)=>{const c=Object(n["resolveComponent"])("Ico"),r=Object(n["resolveComponent"])("Button"),l=Object(n["resolveComponent"])("router-link");return e.post?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",W,[Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("div",X,[Object(n["createElementVNode"])("div",Z,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.post.title),1),e.post.isPublic?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",G,[Object(n["createVNode"])(c,{size:"md",svg:"lock",customColor:"var(--list_info)"},null,8,["customColor"])]))])]),Object(n["createElementVNode"])("div",Q,[Object(n["createVNode"])(H,{post:e.post},null,8,["post"])])]),Object(n["createElementVNode"])("div",K,[Object(n["createVNode"])(r,{class:"btn_dropbox",size:"sm",svg:"more",customColor:"var(--list_info)",customPadding:"0",onClick:d},null,8,["customColor"]),Object(n["createVNode"])(S,{ref_key:"DROPBOX_SLOT_EL",ref:i,dropboxItems:{"글 수정":p,"글 삭제":b,"링크 복사":j}},null,8,["dropboxItems"])])]),Object(n["createElementVNode"])("div",ee,[Object(n["createVNode"])(Object(n["unref"])(a.a),{class:"markdown",source:e.post.content,plugins:s.value,breaks:!0,xhtmlOut:!0,typographer:!0},null,8,["source","plugins"])]),Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("span",{class:"like_ico",onClick:o[0]||(o[0]=(...e)=>Object(n["unref"])(u)&&Object(n["unref"])(u)(...e))},[Object(n["createVNode"])(c,{size:"lg",svg:"like-fill",customColor:e.post.liked?"var(--likeActive)":"#ddd"},null,8,["customColor"])]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.post.likeCount),1)])]),Object(n["createElementVNode"])("div",ne,[Object(n["createVNode"])($["a"],{profile:e.post.author},null,8,["profile"]),Object(n["createVNode"])(l,{to:{name:"profile",params:{nickname:e.post.author.nickname}},class:"a_link"},{default:Object(n["withCtx"])(()=>[ce]),_:1},8,["to"])]),Object(n["createElementVNode"])("div",re,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.post.linkedPosts,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:null===e||void 0===e?void 0:e._id,class:"link"},["prev"===e.rel?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",se,"이전글")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",le,"다음글")),Object(n["createVNode"])(r,{class:"btn_link",content:e.title,customFontSize:"1.4rem",customPadding:"0",onClick:t=>O(e._id)},null,8,["content","customFontSize","onClick"])]))),128))])])):Object(n["createCommentVNode"])("",!0)}}};o("0c94");const ae=C()(ie,[["__scopeId","data-v-36318a72"]]);var de=ae;const me={class:"commentEditor"},ue={class:"wrap_btns"},pe={class:"wrap_toggle"},be={class:"wrap_submit"},Oe={class:"submit"};function je(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Toggle"),i=Object(n["resolveComponent"])("Button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",me,[Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.content=e),ref:"CONTENT_EL",onfocus:"this.placeholder = ''",onBlur:t[1]||(t[1]=(...e)=>c.handlerBlur&&c.handlerBlur(...e))},null,544),[[n["vModelText"],c.content]]),Object(n["createElementVNode"])("div",ue,[Object(n["createElementVNode"])("div",pe,[Object(n["createVNode"])(l,{isPublic:c.isPublic,onUpdateIsPublic:c.onUpdatedIsPublic},null,8,["isPublic","onUpdateIsPublic"])]),Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("div",Oe,[Object(n["createVNode"])(i,{class:"btn_submit",content:o.isUpdate?"댓글 수정":"댓글 작성",bgColor:"primary-dark",size:"md",rounded:!0,onOnClick:t[2]||(t[2]=e=>o.isUpdate?c.onUpdateComment():c.onCreateComment())},null,8,["content"])])])])])}var he=o("1463"),ve={components:{Toggle:he["a"]},props:{postId:{type:String,required:!0},comment:{type:Object},isAuthorized:{type:Boolean},placeholderText:{type:String,default:"코멘트를 작성해보세요"},isUpdate:{type:Boolean}},setup(e,{emit:t}){const o=Object(r["d"])(),{dispatch:c}=Object(s["b"])(),l=Object(n["ref"])(null),i=Object(n["ref"])(null),a=Object(n["ref"])(""),d=Object(n["ref"])(!0),m=()=>{l.value.placeholder=e.placeholderText},u=e=>{d.value=e},p=async()=>{await c("comment/createComment",{postId:e.postId,parentId:e.comment?e.comment._id:"",content:a.value,isPublic:d.value}),a.value="",t("closeEditor")},b=async()=>{await c("comment/updateComment",{id:e.comment._id,postId:e.postId,content:a.value,isPublic:d.value}),a.value="",t("closeEditor")},O=()=>{l.value.placeholder=e.placeholderText,e.comment&&(e.isUpdate?a.value=e.comment.content:i.value=e.comment.parentComment,l.value.focus())};return Object(n["onMounted"])(()=>{O()}),Object(n["watch"])(()=>e.isUpdate,O),{route:o,content:a,CONTENT_EL:l,isPublic:d,handlerBlur:m,onUpdatedIsPublic:u,onCreateComment:p,onUpdateComment:b}}};o("0351");const fe=C()(ve,[["render",je],["__scopeId","data-v-4370ed4c"]]);var Ce=fe;const ke=e=>(Object(n["pushScopeId"])("data-v-2bbc27aa"),e=e(),Object(n["popScopeId"])(),e),ye={key:0,class:"comment_item"},ge={class:"wrap_item"},_e={class:"wrap_header"},Ee={class:"wrap_left"},we={class:"wrap_reply_btn"},Be={class:"wrap_right"},Ve={class:"content"},Ne={key:0,class:"receiver"},Ie={key:1},Se={key:2},$e={key:0,class:"comment_childItem"},De={key:1,class:"not-is-acitve"},Me={class:"content"},xe=ke(()=>Object(n["createElementVNode"])("p",null,"** 해당 댓글은 삭제된 댓글입니다 **",-1)),Le={key:0,class:"comment_childItem"};function Te(e,t,o,c,r,s){var l,i;const a=Object(n["resolveComponent"])("CommentInfoSlot"),d=Object(n["resolveComponent"])("Button"),m=Object(n["resolveComponent"])("ActionSlot"),u=Object(n["resolveComponent"])("CommentEditor"),p=Object(n["resolveComponent"])("CommentSlot",!0);return o.comment.isActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",ye,[Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("div",_e,[Object(n["createElementVNode"])("div",Ee,[Object(n["createVNode"])(a,{comment:o.comment},null,8,["comment"]),Object(n["createElementVNode"])("div",we,[c.isVisible.commentEditor?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:1,class:"btn_reply",content:"에디터 닫기",customPadding:"0",customColor:"var(--primary-dark)",onClick:c.onCloseEditor},null,8,["customColor","onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,class:"btn_reply",content:"답글 작성",customPadding:"0",customColor:"var(--primary-dark)",onClick:c.onCreateEditor},null,8,["customColor","onClick"]))])]),Object(n["createElementVNode"])("div",Be,[Object(n["createVNode"])(d,{class:"btn_dropbox",size:"sm",svg:"more",customPadding:"0",customColor:"var(--list_info)",onClick:c.onAction},null,8,["customColor","onClick"]),Object(n["createVNode"])(m,{ref:"ACTION_SLOT_EL",dropboxItems:{"댓글 수정":c.onUpdateEditor,"댓글 삭제":c.onDeleteComment,"댓글 복사":c.onCopyComment}},null,8,["dropboxItems"])])]),Object(n["createElementVNode"])("div",Ve,[Object(n["createElementVNode"])("p",null,[o.comment.parentComment?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ne,"@ "+Object(n["toDisplayString"])(null===(l=c.parentComment)||void 0===l||null===(i=l.commenter)||void 0===i?void 0:i.nickname),1)):Object(n["createCommentVNode"])("",!0),c.isAuthorized?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Se,Object(n["toDisplayString"])(o.comment.content),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ie,"비밀 댓글입니다. 작성자와 관리자만 볼 수 있어요"))]),o.comment.childCommentCount?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,class:"btn_childComment_toggle",svg:c.isVisible.childComments?"arrow-up":"arrow-down",size:"xs",content:"답글 "+o.comment.childCommentCount+"개",customColor:"var(--primary-dark)",customFontSize:"1.4rem",customPadding:"0",onClick:t[0]||(t[0]=e=>c.isVisible.childComments?c.onHiddenChildComment():c.onDisplayChildComment())},null,8,["svg","content","customColor","customFontSize"])):Object(n["createCommentVNode"])("",!0)]),c.isVisible.commentEditor?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,postId:o.postId,comment:o.comment,isUpdate:c.isUpdate,onCloseEditor:c.onCloseEditor},null,8,["postId","comment","isUpdate","onCloseEditor"])):Object(n["createCommentVNode"])("",!0)]),o.comment.childComments&&c.isVisible.childComments?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",$e,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.comment.childComments,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:e._id,postId:o.postId,userId:o.userId,author:o.author,comment:e},null,8,["postId","userId","author","comment"]))),128))])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",De,[Object(n["createElementVNode"])("div",Me,[xe,o.comment.childCommentCount?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,class:"btn_childComment_toggle",svg:c.isVisible.childComments?"arrow-up":"arrow-down",size:"xs",content:"답글 "+o.comment.childCommentCount+"개",customColor:"var(--primary-dark)",customFontSize:"1.4rem",customPadding:"0",onClick:t[1]||(t[1]=e=>c.isVisible.childComments?c.onHiddenChildComment():c.onDisplayChildComment())},null,8,["svg","content","customColor","customFontSize"])):Object(n["createCommentVNode"])("",!0)]),o.comment.childComments&&c.isVisible.childComments?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Le,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.comment.childComments,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:e._id,postId:o.postId,userId:o.userId,author:o.author,comment:e},null,8,["postId","userId","author","comment"]))),128))])):Object(n["createCommentVNode"])("",!0)]))}const Pe={class:"createdAt"},Ae={class:"child_count"},Ue={class:"info_ico"};function Ye(e,t,o,c,r,s){var l;const i=Object(n["resolveComponent"])("AuthorSlot"),a=Object(n["resolveComponent"])("Ico"),d=Object(n["resolveComponent"])("Info");return Object(n["openBlock"])(),Object(n["createBlock"])(d,null,Object(n["createSlots"])({author:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createVNode"])(i,{profile:o.comment.commenter},null,8,["profile"])])]),createdAt:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",Pe,Object(n["toDisplayString"])(c.dayjs(o.comment.createdAt).format("YYYY년 M월 D일")),1)])]),comment_count:Object(n["withCtx"])(()=>{var e,t,c;return[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",Ae,"답글 "+Object(n["toDisplayString"])(null!==(e=null===(t=o.comment)||void 0===t||null===(c=t.childComments)||void 0===c?void 0:c.length)&&void 0!==e?e:0)+"개",1)])]}),_:2},[null!==(l=o.comment)&&void 0!==l&&l.isPublic?void 0:{name:"is-public",fn:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",Ue,[Object(n["createVNode"])(a,{svg:"lock",size:"sm"})])])])}]),1024)}var qe={name:"CommentInfoSlot",components:{Info:U,AuthorSlot:$["a"]},props:{comment:{type:Object,required:!0}},setup(e){return{dayjs:q.a}}};const ze=C()(qe,[["render",Ye]]);var Fe=ze,He={name:"CommentSlot",components:{CommentInfoSlot:Fe,CommentEditor:Ce,ActionSlot:S},props:{comment:{type:Object,default:()=>({})},userId:{type:String,required:!0},postId:{type:String,required:!0},author:{type:String,required:!0}},emits:["deleteComment"],setup(e){const{getters:t,dispatch:o}=Object(s["b"])(),c=Object(n["inject"])("DIALOG_EL"),r=Object(n["ref"])(null),l=Object(n["ref"])(!1),i=Object(n["reactive"])({commentEditor:!1,childComments:!1}),a=Object(n["computed"])(()=>{var t,o,n;return(null===(t=e.comment)||void 0===t?void 0:t.isPublic)||e.author===e.userId||(null===(o=e.comment)||void 0===o||null===(n=o.commenter)||void 0===n?void 0:n._id)===e.userId}),d=Object(n["computed"])(()=>{var o;return t["comment/getParentComment"](null===(o=e.comment)||void 0===o?void 0:o.parentComment)}),m=()=>{r.value.onToggle()},u=async()=>{const t=await c.value.show({title:"댓글 삭제",message:"해당 댓글을 삭제하시겠습니까?\n한번 삭제된 댓글은 되돌릴 수 없습니다."});if(t){const{success:t,error:n}=await o("comment/deleteComment",{id:e.comment._id,postId:e.postId,commenterId:e.userId});t||alert("실패")}},p=()=>{l.value=!1,i.commentEditor=!0},b=()=>{l.value=!0,i.commentEditor=!0},O=()=>{i.commentEditor=!1},j=()=>{i.childComments=!0},h=()=>{i.childComments=!1},v=async()=>{try{await navigator.clipboard.writeText(e.comment.content),alert("댓글 내용이 복사되었습니다")}catch(t){alert("댓글 내용 복사에 실패하였습니다.")}};return{ACTION_SLOT_EL:r,isUpdate:l,isVisible:i,isAuthorized:a,parentComment:d,onAction:m,onDeleteComment:u,onCreateEditor:p,onUpdateEditor:b,onCloseEditor:O,onDisplayChildComment:j,onHiddenChildComment:h,onCopyComment:v}}};o("d58d");const We=C()(He,[["render",Te],["__scopeId","data-v-2bbc27aa"]]);var Je=We;const Re={class:"comment"},Xe={key:0,class:"comments"},Ze={class:"comment_items"};var Ge={__name:"Comments",props:{post:{type:Object,required:!0,default:()=>({})},userId:{type:String,required:!0,default:""},comments:{type:Array,default:()=>[]},commentCount:{type:Number,default:0}},setup(e){const t=e,{_id:o,author:c}=Object(n["toRefs"])(t.post);return(t,r)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Re,[Object(n["createVNode"])(Ce,{postId:Object(n["unref"])(o)},null,8,["postId"]),e.commentCount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Xe,[Object(n["createElementVNode"])("h2",null,"댓글 "+Object(n["toDisplayString"])(e.commentCount)+"개",1),Object(n["createElementVNode"])("ul",Ze,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.comments,t=>(Object(n["openBlock"])(),Object(n["createBlock"])(Je,{key:t._id,comment:t,userId:e.userId,postId:Object(n["unref"])(o),author:Object(n["unref"])(c)._id},null,8,["comment","userId","postId","author"]))),128))])])):Object(n["createCommentVNode"])("",!0)]))}};o("7611");const Qe=C()(Ge,[["__scopeId","data-v-5c8399a3"]]);var Ke=Qe,et=Object(n["defineComponent"])({name:"post",components:{Post:de,Comments:Ke},props:{quickMove:{type:[Boolean,String],default:!1}},setup(e){const t=Object(r["d"])(),{go:o}=Object(r["e"])(),{state:c,dispatch:l,commit:i}=Object(s["b"])(),a=Object(n["inject"])("DIALOG_EL"),d=Object(n["inject"])("TOAST_EL"),m=Object(n["computed"])(()=>c.post.post),u=Object(n["computed"])(()=>c.auth.id),p=Object(n["computed"])(()=>c.comment.comments),b=Object(n["computed"])(()=>Number(c.comment.commentCount)),O=async()=>{const{success:e,error:t}=m.value.liked?await l("post/deleteLike",{postId:m.value._id}):await l("post/updateLike",{postId:m.value._id});e||d.value.open("error",t)},j=async()=>{const e=await a.value.show({title:"게시물 삭제",message:"게시물을 삭제하시겠습니까?\n한번 삭제된 게시물은 되돌릴 수 없습니다."});if(e){var t,o;const{success:e,error:n}=await l("post/deletePost",{postId:m.value._id,authorId:null===(t=m.value)||void 0===t||null===(o=t.author)||void 0===o?void 0:o._id});e||d.value.open("error",n)}},h=async e=>{const t=await a.value.show({title:"댓글 삭제",message:"해당 댓글을 삭제하시겠습니까?\n한번 삭제된 댓글은 되돌릴 수 없습니다."});if(t){var o;const{success:t,error:n}=await l("comment/deleteComment",{id:e._id,postId:m.value._id,commenterId:null===e||void 0===e||null===(o=e.commenter)||void 0===o?void 0:o._id});t||d.value.open("error",n)}};return Object(n["watch"])(()=>t.query,async()=>{const{success:e,error:n}=await l("post/getPost",{postId:t.query.id});if(!e)return alert(n),o(-1);await l("comment/getComments",t.query.id)},{immediate:!0,flush:"post"}),Object(n["onBeforeMount"])(()=>{if(Boolean(e.quickMove)){const e=document.querySelector(".comments").offsetTop-document.querySelector("#header").offsetHeight-32;window.scrollTo({top:e,behavior:"smooth"})}else window.scrollTo({top:0,behavior:"smooth"})}),Object(n["onUnmounted"])(()=>{i("post/SET_POST",null)}),{post:m,userId:u,comments:p,commentCount:b,onUpdateLike:O,onDeletePost:j,onDeleteComment:h}}});const tt=C()(et,[["render",c]]);t["default"]=tt},"84c6":function(e,t,o){},"9a0d":function(e,t,o){},a6db:function(e,t,o){"use strict";o("7134")},c193:function(e,t,o){},d58d:function(e,t,o){"use strict";o("06f1")}}]);
//# sourceMappingURL=post.10de0f6c.js.map