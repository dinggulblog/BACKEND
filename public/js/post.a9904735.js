(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["post"],{1681:function(e,t,o){"use strict";o("b14e")},4051:function(e,t,o){},5951:function(e,t,o){},"5a0c":function(e,t,o){!function(t,o){e.exports=o()}(0,(function(){"use strict";var e=1e3,t=6e4,o=36e5,n="millisecond",c="second",r="minute",s="hour",l="day",i="week",a="month",m="quarter",u="year",d="date",p="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(e,t,o){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(o)+e},h={s:f,z:function(e){var t=-e.utcOffset(),o=Math.abs(t),n=Math.floor(o/60),c=o%60;return(t<=0?"+":"-")+f(n,2,"0")+":"+f(c,2,"0")},m:function e(t,o){if(t.date()<o.date())return-e(o,t);var n=12*(o.year()-t.year())+(o.month()-t.month()),c=t.clone().add(n,a),r=o-c<0,s=t.clone().add(n+(r?-1:1),a);return+(-(n+(o-c)/(r?c-s:s-c))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:a,y:u,w:i,d:l,D:d,h:s,m:r,s:c,ms:n,Q:m}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",C={};C[v]=j;var k=function(e){return e instanceof E},y=function e(t,o,n){var c;if(!t)return v;if("string"==typeof t){var r=t.toLowerCase();C[r]&&(c=r),o&&(C[r]=o,c=r);var s=t.split("-");if(!c&&s.length>1)return e(s[0])}else{var l=t.name;C[l]=t,c=l}return!n&&c&&(v=c),c||!n&&v},g=function(e,t){if(k(e))return e.clone();var o="object"==typeof t?t:{};return o.date=e,o.args=arguments,new E(o)},_=h;_.l=y,_.i=k,_.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function j(e){this.$L=y(e.locale,null,!0),this.parse(e)}var f=j.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,o=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(b);if(n){var c=n[2]-1||0,r=(n[7]||"0").substring(0,3);return o?new Date(Date.UTC(n[1],c,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],c,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return _},f.isValid=function(){return!(this.$d.toString()===p)},f.isSame=function(e,t){var o=g(e);return this.startOf(t)<=o&&o<=this.endOf(t)},f.isAfter=function(e,t){return g(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<g(e)},f.$g=function(e,t,o){return _.u(e)?this[t]:this.set(o,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var o=this,n=!!_.u(t)||t,m=_.p(e),p=function(e,t){var c=_.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o);return n?c:c.endOf(l)},b=function(e,t){return _.w(o.toDate()[e].apply(o.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),o)},O=this.$W,j=this.$M,f=this.$D,h="set"+(this.$u?"UTC":"");switch(m){case u:return n?p(1,0):p(31,11);case a:return n?p(1,j):p(0,j+1);case i:var v=this.$locale().weekStart||0,C=(O<v?O+7:O)-v;return p(n?f-C:f+(6-C),j);case l:case d:return b(h+"Hours",0);case s:return b(h+"Minutes",1);case r:return b(h+"Seconds",2);case c:return b(h+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var o,i=_.p(e),m="set"+(this.$u?"UTC":""),p=(o={},o[l]=m+"Date",o[d]=m+"Date",o[a]=m+"Month",o[u]=m+"FullYear",o[s]=m+"Hours",o[r]=m+"Minutes",o[c]=m+"Seconds",o[n]=m+"Milliseconds",o)[i],b=i===l?this.$D+(t-this.$W):t;if(i===a||i===u){var O=this.clone().set(d,1);O.$d[p](b),O.init(),this.$d=O.set(d,Math.min(this.$D,O.daysInMonth())).$d}else p&&this.$d[p](b);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[_.p(e)]()},f.add=function(n,m){var d,p=this;n=Number(n);var b=_.p(m),O=function(e){var t=g(p);return _.w(t.date(t.date()+Math.round(e*n)),p)};if(b===a)return this.set(a,this.$M+n);if(b===u)return this.set(u,this.$y+n);if(b===l)return O(1);if(b===i)return O(7);var j=(d={},d[r]=t,d[s]=o,d[c]=e,d)[b]||1,f=this.$d.getTime()+n*j;return _.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,o=this.$locale();if(!this.isValid())return o.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",c=_.z(this),r=this.$H,s=this.$m,l=this.$M,i=o.weekdays,a=o.months,m=function(e,o,c,r){return e&&(e[o]||e(t,n))||c[o].slice(0,r)},u=function(e){return _.s(r%12||12,e,"0")},d=o.meridiem||function(e,t,o){var n=e<12?"AM":"PM";return o?n.toLowerCase():n},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:_.s(l+1,2,"0"),MMM:m(o.monthsShort,l,a,3),MMMM:m(a,l),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:m(o.weekdaysMin,this.$W,i,2),ddd:m(o.weekdaysShort,this.$W,i,3),dddd:i[this.$W],H:String(r),HH:_.s(r,2,"0"),h:u(1),hh:u(2),a:d(r,s,!0),A:d(r,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:c};return n.replace(O,(function(e,t){return t||b[e]||c.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(n,d,p){var b,O=_.p(d),j=g(n),f=(j.utcOffset()-this.utcOffset())*t,h=this-j,v=_.m(this,j);return v=(b={},b[u]=v/12,b[a]=v,b[m]=v/3,b[i]=(h-f)/6048e5,b[l]=(h-f)/864e5,b[s]=h/o,b[r]=h/t,b[c]=h/e,b)[O]||h,p?v:_.a(v)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return C[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var o=this.clone(),n=y(e,t,!0);return n&&(o.$L=n),o},f.clone=function(){return _.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},j}(),w=E.prototype;return g.prototype=w,[["$ms",n],["$s",c],["$m",r],["$H",s],["$W",l],["$M",a],["$y",u],["$D",d]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),g.extend=function(e,t){return e.$i||(e(t,E,g),e.$i=!0),g},g.locale=y,g.isDayjs=k,g.unix=function(e){return g(1e3*e)},g.en=C[v],g.Ls=C,g.p={},g}))},"609a":function(e,t,o){},"7c2b":function(e,t,o){"use strict";o.r(t);var n=o("7a23");function c(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Post",!0),i=Object(n["resolveComponent"])("Comments"),a=Object(n["resolveComponent"])("Dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,{profile:e.profile,post:e.post,onOnDeletePost:e.onDeletePost},null,8,["profile","post","onOnDeletePost"]),Object(n["createVNode"])(i,{comments:e.comments,commentCount:e.commentCount,profile:e.profile,post:e.post,onOnDeleteComment:e.onDeleteComment},null,8,["comments","commentCount","profile","post","onOnDeleteComment"]),Object(n["createVNode"])(a,{ref:"Dialog"},null,512)],64)}var r=o("6605"),s=o("5502");const l={key:0,class:"post"},i={class:"wrap_header"},a={class:"wrap_left"},m={class:"wrap_title"},u={class:"title"},d={key:0,class:"lock_ico"},p={class:"wrap_info"},b={class:"wrap_right"},O={class:"content"},j={class:"wrap_like"},f={class:"liked_count"},h={class:"wrap_author"},v=Object(n["createTextVNode"])(" 프로필 보러가기 ");function C(e,t,o,c,r,s){const C=Object(n["resolveComponent"])("Ico"),k=Object(n["resolveComponent"])("PostInfoSlot"),y=Object(n["resolveComponent"])("Button"),g=Object(n["resolveComponent"])("ActionSlot"),_=Object(n["resolveComponent"])("markdown"),E=Object(n["resolveComponent"])("AuthorSlot"),w=Object(n["resolveComponent"])("router-link");return e.post._id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.post.title),1),e.post.isPublic?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",d,[Object(n["createVNode"])(C,{size:"md",svg:"lock",customColor:"var(--list_info)"},null,8,["customColor"])]))])]),Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(k,{post:e.post},null,8,["post"])])]),Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(y,{class:"btn_dropbox",tabindex:"-1",size:"sm",svg:"more",customColor:"var(--list_info)",customPadding:"0",onClick:e.onAction},null,8,["customColor","onClick"]),Object(n["createVNode"])(g,{ref:"DROPBOX_SLOT_EL",dropboxItems:{"글 수정":e.onUpdatePost,"글 삭제":e.onDeletePost,"링크 복사":e.onCopyLink}},null,8,["dropboxItems"])])]),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(_,{class:"markdown",source:e.post.content,plugins:e.plugins,breaks:!0,xhtmlOut:!0,typographer:!0},null,8,["source","plugins"])]),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("span",{class:"like_ico",onClick:t[0]||(t[0]=(...t)=>e.onChangeLike&&e.onChangeLike(...t))},[Object(n["createVNode"])(C,{size:"lg",svg:"like-fill",customColor:e.liked?"var(--likeActive)":"#ddd"},null,8,["customColor"])]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.likeCount),1)])]),Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(E,{profile:e.post.author},null,8,["profile"]),Object(n["createVNode"])(w,{to:{name:"profile",params:{nickname:e.post.author.nickname}},class:"a_link"},{default:Object(n["withCtx"])(()=>[v]),_:1},8,["to"])])])):Object(n["createCommentVNode"])("",!0)}const k=(e,t=300)=>{let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{e.apply(this,n)},t)}};var y=o("5a0c"),g=o.n(y),_=o("f03e"),E=o.n(_),w=o("362d"),V=o.n(w);const B=["onClick"];function N(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(c.isMobile?"BottomSheet":"Dropbox"),{ref:"DROPBOX_EL"},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.dropboxItems,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t},[Object(n["createElementVNode"])("span",{onClick:e},Object(n["toDisplayString"])(t),9,B)]))),128))]),_:1},512)}var S=o("7702");const D={class:"dropbox"},$={class:"wrap_dropbox_items",ref:"DROPBOX_ITEMS_EL"};function M(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",D,[Object(n["createElementVNode"])("div",$,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"default")])],512)])}var x={name:"Dropbox",setup(){const e=Object(n["ref"])(null),t=()=>{r(),e.value.classList.add("show")},o=()=>{e.value.classList.remove("show")},c=()=>{e.value.classList.contains("show")?o():t()},r=()=>{const e=document.body.getElementsByClassName("wrap_dropbox_items");for(let t=0;t<e.length;t++)e[t].classList.contains("show")&&e[t].classList.remove("show")};return window.onclick=e=>{e.target.matches(".btn_dropbox > svg")||e.target.matches(".btn_dropbox > svg > path")||r()},Object(n["onMounted"])(()=>{e.value.addEventListener("click",e=>{e.stopPropagation()})}),{DROPBOX_ITEMS_EL:e,open:t,close:o,toggle:c}}},A=o("6b0d"),I=o.n(A);const T=I()(x,[["render",M]]);var P=T;const L={key:0,class:"popup-modal"},U={class:"window"};function z(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Transition"],{name:"fade"},{default:Object(n["withCtx"])(()=>[c.isVisible?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"default")])])])):Object(n["createCommentVNode"])("",!0)]),_:3})}var Y={setup(){const e=Object(n["ref"])(!1),t=()=>{e.value=!0},o=()=>{e.value=!1},c=()=>{e.value?o():t()};return{isVisible:e,open:t,close:o,toggle:c}}};o("e0ec");const q=I()(Y,[["render",z]]);var H=q,F={name:"DropboxSlot",components:{Dropbox:P,BottomSheet:H},props:{dropboxItems:{type:Object,required:!0}},setup(){const e=Object(S["a"])("only screen and (max-width: 1023px)"),t=Object(n["ref"])(null),o=()=>{t.value.toggle()},c=o=>{!e||!t.value.isVisible||o.target.matches(".btn_dropbox > svg")||o.target.matches(".btn_dropbox > svg > path")||o.target.matches(".window")||o.target.matches(".window > ul")||o.target.matches(".window > ul > li")||t.value.close()};return Object(n["onMounted"])(()=>{document.body.addEventListener("click",c)}),Object(n["onUnmounted"])(()=>{document.body.removeEventListener("click",c)}),{isMobile:e,DROPBOX_EL:t,onToggle:o}}};o("c4ab");const W=I()(F,[["render",N]]);var R=W,J=o("76aa");const X={class:"createdAt"},Z={class:"category"};function G(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Info");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{createdAt:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",X,Object(n["toDisplayString"])(c.dayjs(o.post.createdAt).format("YYYY. M. D")),1)])]),category:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",Z,Object(n["toDisplayString"])(o.post.category),1)])]),_:1})}const Q={class:"info"};function K(e,t,o,c,r,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[Object(n["createElementVNode"])("ul",null,[Object(n["renderSlot"])(e.$slots,"author"),Object(n["renderSlot"])(e.$slots,"createdAt"),Object(n["renderSlot"])(e.$slots,"category"),Object(n["renderSlot"])(e.$slots,"reply_count"),Object(n["renderSlot"])(e.$slots,"is-public")])])}var ee={};o("c274");const te=I()(ee,[["render",K]]);var oe=te,ne={name:"InfoSlot",components:{Info:oe},props:{post:{type:Object,required:!0}},setup(){return{dayjs:g.a}}};const ce=I()(ne,[["render",G]]);var re=ce,se=o("af7e"),le=o.n(se),ie=Object(n["defineComponent"])({components:{Markdown:E.a,ActionSlot:R,AuthorSlot:J["a"],PostInfoSlot:re},props:{post:{type:Object,default:()=>({})},profile:{type:Object,default:()=>({})}},setup(e,{emit:t}){const{push:o}=Object(r["e"])(),{state:c,dispatch:l}=Object(s["b"])(),i=Object(n["ref"])("https://dinggul.me/uploads/"),a=Object(n["ref"])([{plugin:V.a}]),m=Object(n["ref"])(!1),u=Object(n["computed"])(()=>c.post.likes),d=Object(n["computed"])(()=>c.post.likeCount),p=Object(n["ref"])(null),b=()=>{p.value.onToggle()},O=k(async()=>{if(!e.profile._id)return alert("로그인 후 이용 가능합니다.");m.value?await l("post/deleteLike",{postId:e.post._id,userId:e.profile._id}):await l("post/updateLike",{postId:e.post._id,userId:e.profile._id})},200),j=()=>{e.post._id&&o({name:"editor",query:{id:e.post._id}})},f=()=>{e.post._id&&t("onDeletePost")},h=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("클립보드에 복사되었습니다")}catch(e){alert("링크 복사에 실패하였습니다.")}};return Object(n["onBeforeUpdate"])(()=>{m.value=u.value.some(t=>t===e.profile._id)}),{dayjs:g.a,plugins:a,liked:m,likes:u,likeCount:d,IMAGE_URL:i,DROPBOX_SLOT_EL:p,DEFAULT_AVATAR_64:le.a,onAction:b,onChangeLike:O,onUpdatePost:j,onDeletePost:f,onCopyLink:h}}});o("1681");const ae=I()(ie,[["render",C],["__scopeId","data-v-6e2913ea"]]);var me=ae;const ue={class:"comment"},de={key:0,class:"comments"},pe={class:"comment_items"};function be(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("CommentEditor"),i=Object(n["resolveComponent"])("CommentSlot");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ue,[Object(n["createVNode"])(l,{post:e.post},null,8,["post"]),e.commentCount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",de,[Object(n["createElementVNode"])("h2",null,"댓글 "+Object(n["toDisplayString"])(e.commentCount)+"개",1),Object(n["createElementVNode"])("ul",pe,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.comments,t=>(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:t._id,comment:t,post:e.post,isAuthorized:e.onGetAuthorized(t),onOnDeleteComment:e.onDeleteComment},null,8,["comment","post","isAuthorized","onOnDeleteComment"]))),128))])])):Object(n["createCommentVNode"])("",!0)])}const Oe={class:"commentEditor"},je={class:"wrap_btns"},fe={class:"wrap_toggle"},he={class:"wrap_submit"},ve={class:"submit"};function Ce(e,t,o,c,r,s){const l=Object(n["resolveComponent"])("Toggle"),i=Object(n["resolveComponent"])("Button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Oe,[Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.content=e),ref:"CONTENT_EL",onfocus:"this.placeholder = ''",onBlur:t[1]||(t[1]=(...e)=>c.handlerBlur&&c.handlerBlur(...e))},null,544),[[n["vModelText"],c.content]]),Object(n["createElementVNode"])("div",je,[Object(n["createElementVNode"])("div",fe,[Object(n["createVNode"])(l,{isPublic:c.isPublic,onUpdateIsPublic:c.onUpdatedIsPublic},null,8,["isPublic","onUpdateIsPublic"])]),Object(n["createElementVNode"])("div",he,[Object(n["createElementVNode"])("div",ve,[Object(n["createVNode"])(i,{class:"btn_submit",content:o.isUpdate?"댓글 수정":"댓글 작성",bgColor:"primary-dark",size:"md",rounded:!0,onOnClick:t[2]||(t[2]=e=>o.isUpdate?c.onUpdateComment():c.onCreateComment())},null,8,["content"])])])])])}var ke=o("27d0"),ye={components:{Toggle:ke["a"]},props:{post:{type:Object,required:!0},comment:{type:Object},isAuthorized:{type:Boolean},placeholderText:{type:String,default:"코멘트를 작성해보세요"},isUpdate:{type:Boolean}},setup(e,{emit:t}){const o=Object(r["d"])(),{dispatch:c}=Object(s["b"])(),l=Object(n["ref"])(null),i=Object(n["ref"])(null),a=Object(n["ref"])(""),m=Object(n["ref"])(!0),u=()=>{l.value.placeholder=e.placeholderText},d=e=>{m.value=e},p=async()=>{await c("comment/createComment",{postId:e.post._id,parentId:e.comment?e.comment._id:"",content:a.value,isPublic:m.value}),a.value="",t("closeEditor")},b=async()=>{await c("comment/updateComment",{id:e.comment._id,postId:e.post._id,content:a.value,isPublic:m.value}),a.value="",t("closeEditor")},O=()=>{l.value.placeholder=e.placeholderText,e.comment&&(e.isUpdate?a.value=e.comment.content:i.value=e.comment.parentComment,l.value.focus())};return Object(n["onMounted"])(()=>{O()}),Object(n["watch"])(()=>e.isUpdate,O),{route:o,content:a,CONTENT_EL:l,isPublic:m,handlerBlur:u,onUpdatedIsPublic:d,onCreateComment:p,onUpdateComment:b}}};o("82e7");const ge=I()(ye,[["render",Ce],["__scopeId","data-v-8b6978a8"]]);var _e=ge;const Ee=e=>(Object(n["pushScopeId"])("data-v-248cdef5"),e=e(),Object(n["popScopeId"])(),e),we={key:0,class:"comment_item"},Ve={class:"wrap_item"},Be={class:"wrap_header"},Ne={class:"wrap_left"},Se={class:"wrap_reply_btn"},De={class:"wrap_right"},$e={class:"content"},Me={key:0,class:"receiver"},xe={key:1},Ae={key:2},Ie={key:0,class:"comment_childItem"},Te={key:1,class:"not-is-acitve"},Pe={class:"content"},Le=Ee(()=>Object(n["createElementVNode"])("p",null,"** 해당 댓글은 삭제된 댓글입니다 **",-1)),Ue={key:0,class:"comment_childItem"};function ze(e,t,o,c,r,s){var l,i;const a=Object(n["resolveComponent"])("CommentInfoSlot"),m=Object(n["resolveComponent"])("Button"),u=Object(n["resolveComponent"])("ActionSlot"),d=Object(n["resolveComponent"])("CommentEditor"),p=Object(n["resolveComponent"])("CommentSlot",!0);return o.comment.isActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",we,[Object(n["createElementVNode"])("div",Ve,[Object(n["createElementVNode"])("div",Be,[Object(n["createElementVNode"])("div",Ne,[Object(n["createVNode"])(a,{comment:o.comment},null,8,["comment"]),Object(n["createElementVNode"])("div",Se,[c.isVisible.commentEditor?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:1,class:"btn_reply",content:"에디터 닫기",customPadding:"0",customColor:"var(--primary-dark)",onClick:c.onCloseEditor},null,8,["customColor","onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"btn_reply",content:"답글 작성",customPadding:"0",customColor:"var(--primary-dark)",onClick:c.onCreateEditor},null,8,["customColor","onClick"]))])]),Object(n["createElementVNode"])("div",De,[Object(n["createVNode"])(m,{class:"btn_dropbox",size:"sm",svg:"more",customPadding:"0",customColor:"var(--list_info)",onClick:c.onAction},null,8,["customColor","onClick"]),Object(n["createVNode"])(u,{ref:"ACTION_SLOT_EL",dropboxItems:{"댓글 수정":c.onUpdateEditor,"댓글 삭제":c.onDeleteComment,"댓글 복사":c.onCopyComment}},null,8,["dropboxItems"])])]),Object(n["createElementVNode"])("div",$e,[Object(n["createElementVNode"])("p",null,[o.comment.parentComment?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Me,"@ "+Object(n["toDisplayString"])(null===(l=c.myParentComment)||void 0===l||null===(i=l.commenter)||void 0===i?void 0:i.nickname),1)):Object(n["createCommentVNode"])("",!0),o.isAuthorized?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ae,Object(n["toDisplayString"])(o.comment.content),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",xe,"비밀 댓글입니다. 작성자와 관리자만 볼 수 있어요"))]),o.comment.childCommentCount?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"btn_childComment_toggle",svg:c.isVisible.childComments?"arrow-up":"arrow-down",size:"xs",content:"답글 "+o.comment.childCommentCount+"개",customColor:"var(--primary-dark)",customFontSize:"1.4rem",customPadding:"0",onClick:t[0]||(t[0]=e=>c.isVisible.childComments?c.onHiddenChildComment():c.onDisplayChildComment())},null,8,["svg","content","customColor","customFontSize"])):Object(n["createCommentVNode"])("",!0)]),c.isVisible.commentEditor?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,post:o.post,comment:o.comment,isUpdate:c.isUpdate,onCloseEditor:c.onCloseEditor},null,8,["post","comment","isUpdate","onCloseEditor"])):Object(n["createCommentVNode"])("",!0)]),o.comment.childComments&&c.isVisible.childComments?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ie,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.comment.childComments,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:e._id,comment:e,post:o.post,isAuthorized:o.isAuthorized},null,8,["comment","post","isAuthorized"]))),128))])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Te,[Object(n["createElementVNode"])("div",Pe,[Le,o.comment.childCommentCount?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"btn_childComment_toggle",svg:c.isVisible.childComments?"arrow-up":"arrow-down",size:"xs",content:"답글 "+o.comment.childCommentCount+"개",customColor:"var(--primary-dark)",customFontSize:"1.4rem",customPadding:"0",onClick:t[1]||(t[1]=e=>c.isVisible.childComments?c.onHiddenChildComment():c.onDisplayChildComment())},null,8,["svg","content","customColor","customFontSize"])):Object(n["createCommentVNode"])("",!0)]),o.comment.childComments&&c.isVisible.childComments?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",Ue,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.comment.childComments,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:e._id,comment:e,post:o.post,isAuthorized:o.isAuthorized},null,8,["comment","post","isAuthorized"]))),128))])):Object(n["createCommentVNode"])("",!0)]))}const Ye={class:"createdAt"},qe={class:"child_count"},He={class:"info_ico"};function Fe(e,t,o,c,r,s){var l;const i=Object(n["resolveComponent"])("AuthorSlot"),a=Object(n["resolveComponent"])("Ico"),m=Object(n["resolveComponent"])("Info");return Object(n["openBlock"])(),Object(n["createBlock"])(m,null,Object(n["createSlots"])({author:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createVNode"])(i,{profile:o.comment.commenter},null,8,["profile"])])]),createdAt:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",Ye,Object(n["toDisplayString"])(c.dayjs(o.comment.createdAt).format("YYYY년 M월 D일")),1)])]),comment_count:Object(n["withCtx"])(()=>{var e,t,c;return[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",qe,"답글 "+Object(n["toDisplayString"])(null!==(e=null===(t=o.comment)||void 0===t||null===(c=t.childComments)||void 0===c?void 0:c.length)&&void 0!==e?e:0)+"개",1)])]}),_:2},[null!==(l=o.comment)&&void 0!==l&&l.isPublic?void 0:{name:"is-public",fn:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("span",He,[Object(n["createVNode"])(a,{svg:"lock",size:"sm"})])])])}]),1024)}var We={name:"CommentInfoSlot",components:{Info:oe,AuthorSlot:J["a"]},props:{comment:{type:Object,required:!0}},setup(e){return{dayjs:g.a}}};const Re=I()(We,[["render",Fe]]);var Je=Re,Xe=(o("f07f"),{name:"CommentSlot",components:{CommentInfoSlot:Je,CommentEditor:_e,ActionSlot:R},props:{comment:{type:Object,required:!0},post:{type:Object,required:!0},isAuthorized:{type:Boolean,required:!0}},emits:["onDeleteComment"],setup(e,{emit:t}){const{state:o}=Object(s["b"])(),c=Object(n["computed"])(()=>o.comment.comments),r=Object(n["ref"])(!1),l=Object(n["ref"])(null),i=Object(n["ref"])(null),a=Object(n["reactive"])({commentEditor:!1,childComments:!1}),m=()=>{i.value.onToggle()},u=()=>{r.value=!1,a.commentEditor=!0},d=()=>{r.value=!0,a.commentEditor=!0},p=()=>{a.commentEditor=!1},b=()=>{a.childComments=!0},O=()=>{a.childComments=!1},j=()=>{t("onDeleteComment",e.comment)},f=async()=>{try{await navigator.clipboard.writeText(e.comment.content),alert("댓글 내용이 복사되었습니다")}catch(t){alert("댓글 내용 복사에 실패하였습니다.")}},h=(e,t=null)=>{if(e._id===t)return e;if(Array.isArray(e.childComments)){let o=null;for(const n of e.childComments)o=h(n,t);return o}return null};return Object(n["onBeforeMount"])(()=>{l.value=c.value.find(t=>h(t,e.comment.parentComment))}),{ACTION_SLOT_EL:i,isVisible:a,isUpdate:r,myParentComment:l,onAction:m,onCreateEditor:u,onUpdateEditor:d,onCloseEditor:p,onDisplayChildComment:b,onHiddenChildComment:O,onDeleteComment:j,onCopyComment:f}}});o("cb8a");const Ze=I()(Xe,[["render",ze],["__scopeId","data-v-248cdef5"]]);var Ge=Ze,Qe=Object(n["defineComponent"])({components:{CommentEditor:_e,CommentSlot:Ge},props:{comments:{type:Object},commentCount:{type:Number,default:0},post:{type:Object},profile:{type:Object}},setup(e,{emit:t}){const o=t=>{var o;return!!t.isPublic||(!(!e.profile||(null===(o=e.post.author)||void 0===o?void 0:o.nickname)!==e.profile.nickname)||!(!e.profile||t.commenter.nickname!==e.profile.nickname))},n=e=>{t("onDeleteComment",e)};return{onGetAuthorized:o,onDeleteComment:n}}});o("b11f");const Ke=I()(Qe,[["render",be],["__scopeId","data-v-8bc81712"]]);var et=Ke,tt=Object(n["defineComponent"])({name:"post",components:{Post:me,Comments:et},props:{quickMove:{type:[Boolean,String],default:!1}},setup(e){const t=Object(r["d"])(),{push:o}=Object(r["e"])(),{state:c,dispatch:l,commit:i}=Object(s["b"])(),a=Object(n["ref"])(null),m=Object(n["computed"])(()=>c.auth.profile),u=Object(n["computed"])(()=>c.post.post),d=Object(n["computed"])(()=>c.comment.comments),p=Object(n["computed"])(()=>Number(c.comment.commentCount)),b=async()=>{if(u.value.author._id!==m.value._id)return alert("본인 소유의 게시물만 삭제가 가능합니다.");const e=await a.value.show({title:"게시물 삭제",message:"게시물을 삭제하시겠습니까?\n한번 삭제된 게시물은 되돌릴 수 없습니다."});e&&await l("post/deletePost",u.value._id)},O=async e=>{if(e.commenter._id!==m.value._id)return alert("본인 댓글만 삭제가 가능합니다.");const t=await a.value.show({title:"댓글 삭제",message:"해당 댓글을 삭제하시겠습니까?\n한번 삭제된 댓글은 되돌릴 수 없습니다."});t&&await l("comment/deleteComment",{postId:u.value._id,id:e._id})};return Object(n["onBeforeMount"])(async()=>{if(t.query.id?(await l("post/getPost",t.query.id),await l("comment/getComments",t.query.id)):o({name:"home"}),Boolean(e.quickMove&&d.value)){const e=document.querySelector(".comments").offsetTop-document.querySelector("#header").offsetHeight-32;window.scrollTo({top:e,behavior:"smooth"})}else window.scrollTo({top:0,behavior:"smooth"})}),Object(n["onUnmounted"])(()=>{i("post/SET_POST",new Object)}),{Dialog:a,profile:m,post:u,comments:d,commentCount:p,onDeletePost:b,onDeleteComment:O}}});const ot=I()(tt,[["render",c]]);t["default"]=ot},"82e7":function(e,t,o){"use strict";o("fd8c")},8403:function(e,t,o){},b11f:function(e,t,o){"use strict";o("8403")},b14e:function(e,t,o){},c274:function(e,t,o){"use strict";o("e87d")},c4ab:function(e,t,o){"use strict";o("609a")},cb8a:function(e,t,o){"use strict";o("5951")},e0ec:function(e,t,o){"use strict";o("4051")},e87d:function(e,t,o){},fd8c:function(e,t,o){}}]);
//# sourceMappingURL=post.a9904735.js.map